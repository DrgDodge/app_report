<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Raport de Lucru</title>
    <style>
        @page {
            size: A4;
            margin: 1cm;
        }

        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            font-size: 10px;
            color: #333;
        }

        .header-table, .content-table, .footer-table {
            width: 100%;
            border-collapse: collapse;
        }

        .header-table td {
            vertical-align: top;
        }

        .logo {
            width: 150px;
            height: auto;
        }

        .company-details {
            text-align: right;
        }

        .report-details {
            text-align: left;
        }

        .section-title {
            font-size: 12px;
            font-weight: bold;
            background-color: #f2f2f2;
            padding: 5px;
            margin-top: 10px;
        }

        .content-table td {
            padding: 5px;
            vertical-align: top;
        }

        .parts-table {
            width: 100%;
            border-collapse: collapse;
        }

        .parts-table th, .parts-table td {
            border: 1px solid #ddd;
            padding: 5px;
            text-align: left;
        }

        .parts-table th {
            background-color: #f2f2f2;
        }

        .page-break {
            page-break-after: always;
        }

        .footer-table td {
            padding-top: 20px;
        }
    </style>
</head>
<body>
    <table class="header-table">
        <tr>
            <td class="report-details">
                <h2>Raport de Lucru</h2>
                <p><strong>Nr:</strong> {{ raport.numar_raport }}</p>
                <p><strong>Data:</strong> {{ raport.data }}</p>
                <p><strong>Tehnician:</strong> {{ raport.tehnician }}</p>
                <p><strong>Tip Raport:</strong> {{ tip_raport }}</p>
            </td>
            <td class="company-details">
                {% if companie.logo %}
                <img src="{{ url_for('static', filename=companie.logo) }}" alt="Logo" class="logo">
                {% endif %}
                <p>{{ companie.nume }}</p>
                <p>{{ companie.adresa }}</p>
                <p>{{ companie.email }} | {{ companie.telefon }}</p>
            </td>
        </tr>
    </table>

    <div class="section-title">Detalii Client si Utilaj</div>
    <table class="content-table">
        <tr>
            <td style="width: 50%;">
                <p><strong>Client:</strong> {{ raport.client_nume_text }}</p>
                <p><strong>Locatie:</strong> {{ raport.locatie }}</p>
            </td>
            <td style="width: 50%;">
                <p><strong>Utilaj:</strong> {{ raport.utilaj }}</p>
                <p><strong>Serie:</strong> {{ raport.serie_utilaj }}</p>
                <p><strong>Ore functionare:</strong> {{ raport.ore_funct }}</p>
            </td>
        </tr>
        <tr>
            <td>
                <div class="section-title">Solicitare client</div>
                <div>{{ raport.solicitare_client }}</div>
            </td>
            <td>
                <div class="section-title">Operatii efectuate</div>
                <div>{{ raport.operatii_efectuate }}</div>
            </td>
        </tr>
    </table>

    <div class="section-title">Piese</div>
    <table class="content-table">
        <tr>
            <td style="width: 50%;">
                <div class="section-title">Piese inlocuite</div>
                <table class="parts-table">
                    <thead>
                        <tr>
                            <th>P/N</th>
                            <th>Descriere</th>
                            <th>Buc</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for piesa in piese_inlocuite %}
                        <tr>
                            <td>{{ piesa.pn }}</td>
                            <td>{{ piesa.descriere }}</td>
                            <td>{{ piesa.buc }}</td>
                        </tr>
                        {% if loop.index % 10 == 0 and not loop.last %}
                            </tbody></table></td></tr></table><div class="page-break"></div><table class="content-table"><tr><td style="width: 50%;"><table class="parts-table"><tbody>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </td>
            <td style="width: 50%;">
                <div class="section-title">Necesar piese</div>
                <table class="parts-table">
                    <thead>
                        <tr>
                            <th>P/N</th>
                            <th>Descriere</th>
                            <th>Buc</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for piesa in piese_necesare %}
                        <tr>
                            <td>{{ piesa.pn }}</td>
                            <td>{{ piesa.descriere }}</td>
                            <td>{{ piesa.buc }}</td>
                        </tr>
                        {% if loop.index % 10 == 0 and not loop.last %}
                            </tbody></table></td></tr></table><div class="page-break"></div><table class="content-table"><tr><td style="width: 50%;"><table class="parts-table"><tbody>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </td>
        </tr>
    </table>

    <div class="section-title">Sumar</div>
    <table class="content-table">
        <tr>
            <td style="width: 50%;">
                <p><strong>Manopera (ore):</strong> {{ raport.manopera_ore }}</p>
            </td>
            <td style="width: 50%;">
                <p><strong>Km efectuati:</strong> {{ raport.km_efectuati }}</p>
            </td>
        </tr>
    </table>

    <table class="footer-table">
        <tr>
            <td style="width: 50%;">
                <p><strong>CLIENT (nume, prenume, functie, semn., stampila)</strong></p>
                <br><br>
                <p>{{ raport.nume_semnatura_client }}</p>
            </td>
        </tr>
    </table>
</body>
</html>